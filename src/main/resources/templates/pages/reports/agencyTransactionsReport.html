<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/main_layout}">
<head>
  <title>Agency Banking Transactions Report</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div layout:fragment="pageStyle" th:remove="tag">
  <link th:href="@{/assets/plugins/bootstrap-tagsinput/css/bootstrap-tagsinput.css}" rel="stylesheet" />
  <link rel="stylesheet" th:href="@{/assets/plugins/switchery/switchery.min.css}">
  <link th:href="@{/assets/plugins/select2/css/select2.min.css}" rel="stylesheet" type="text/css" />
  <link th:href="@{/assets/plugins/timepicker/bootstrap-timepicker.min.css}" rel="stylesheet">
  <link th:href="@{/assets/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css}" rel="stylesheet">
  <link th:href="@{/assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css}" rel="stylesheet">
  <link th:href="@{/assets/plugins/clockpicker/css/bootstrap-clockpicker.min.css}" rel="stylesheet">
  <link th:href="@{/assets/plugins/bootstrap-daterangepicker/daterangepicker.css}" rel="stylesheet">
</div>
<div class="container" layout:fragment="contents">
<!--  <th:block th:each="txnType, row : ${txnTypes}">-->
<!--    <div class="row tile_count" th:remove="${row.index % 4} == 0 ? none : tag">-->
<!--      <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">-->
<!--        <div class="card" style="width: 18rem;">-->
<!--          <img th:src="@{${txnType.image_url}}" style="width:64px;">-->
<!--          <div class="card-body">-->
<!--            <h5 class="card-title" th:text="${txnType.name}"></h5>-->
<!--            <p class="card-text"><bold>Count: </bold><span th:text="${txnType.count}"></span></p>-->
<!--            <p class="card-text"><bold>Total: </bold><span th:text="${txnType.total}"></span></p>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </th:block>-->
  <div class="row" th:each="txnType, row: ${txnTypes}" th:with="numList=${#strings.listSplit('3,2,1,0', ',')}" th:if="${row.count} % 4 == 0 or ${row.last}" style="margin: 20px 0;">
    <div class="col-md-3" th:each="num : ${numList}" th:with="dataIndex=(${row.index} - ${num})">
      <div class="card" style="flex-direction: inherit; box-shadow: 0 0 10px 0 rgba(100, 100, 100, 0.26);">
        <img th:src="@{${txnTypes[dataIndex].image_url}}" style="margin-left: 10px">
        <div class="card-body">
          <h5 class="card-title" th:text="${txnTypes[dataIndex].name}"></h5>
          <p class="card-text"><strong>Count: </strong><span th:text="${txnTypes[dataIndex].count}"></span></p>
          <p class="card-text"><strong>Total: </strong><span th:text="${txnTypes[dataIndex].total}"></span></p>
        </div>
      </div>
    </div>
<!--    <div class="col-md-3" th:each="num : ${numList}" th:with="dataIndex=(${row.index} - ${num})" th:if="${row.last} and ${row.count % 4 != 0} and ${num} &lt; ${row.count} % 4">-->
<!--      <div class="card" style="width: 18rem;">-->
<!--        <img th:src="@{${txnTypes[dataIndex].image_url}}" style="width:64px;">-->
<!--        <div class="card-body">-->
<!--          <h5 class="card-title" th:text="${txnTypes[dataIndex].name}"></h5>-->
<!--          <p class="card-text"><strong>Count: </strong><span th:text="${txnTypes[dataIndex].count}"></span></p>-->
<!--          <p class="card-text"><strong>Total: </strong><span th:text="${txnTypes[dataIndex].total}"></span></p>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
  </div>
</div>
<div layout:fragment="pageScript" th:remove="tag">
  <script th:src="@{/assets/plugins/bootstrap-tagsinput/js/bootstrap-tagsinput.min.js}"></script>
  <script th:src="@{/assets/plugins/select2/js/select2.min.js}" type="text/javascript"></script>
  <script th:src="@{/assets/plugins/bootstrap-filestyle/js/bootstrap-filestyle.min.js}" type="text/javascript"></script>
  <script th:src="@{/assets/plugins/switchery/switchery.min.js}"></script>
  <script type="text/javascript" th:src="@{/assets/plugins/parsleyjs/parsley.min.js}"></script>
  <script th:src="@{/assets/plugins/moment/moment.js}"></script>
  <script th:src="@{/assets/plugins/timepicker/bootstrap-timepicker.js}"></script>
  <script th:src="@{/assets/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js}"></script>
  <script th:src="@{/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js}"></script>
  <script th:src="@{/assets/plugins/clockpicker/js/bootstrap-clockpicker.min.js}"></script>
  <script th:src="@{/assets/plugins/bootstrap-daterangepicker/daterangepicker.js}"></script>
  <!--<script th:src="@{/assets/plugins/summernote/summernote-bs.min.js}"></script>-->
  <script>
      $(document).ready(function () {
          $('#preloader').hide();
          $('#preloader2').hide();
          $('input[id$=datepicker-autoclose]').datepicker({dateFormat: 'yy-mm-dd'});
          /*  Submit form using Ajax */
          $('button[type=submit]').click(function (e) {
              $('#preloader2').show();
              //Prevent default submission of form
              e.preventDefault();
              //Remove all errors
              $('input').next().remove();
              var txnType = $("select[name='txnType']").val();
              var txnDate = $("input[name='txnDate']").val();
              $.ajax({
                  url: "/getReconDashboard",
                  type: 'GET',
                  data: {txnType: txnType, txnDate: txnDate},
                  dataType: "json",
                  success: function (res) {
                      $('.error').html('');
                      if (res.validated) {
                          $('#preloader2').hide();
                          location.reload();
                      } else {
                          $('#preloader2').hide();
                          $.each(res.errorMessages, function (key, value) {
                              $('Select[name=' + key + ']').after('<span class="error" style="color:red">' + value + '</span>');
                              $('input[name=' + key + ']').after('<span class="error" style="color:red">' + value + '</span>');
                          });
                      }
                  }
              })
          });
          //load the tab content
          $('[data-toggle="tab"]').click(function (e) {
              $("#preloader").show();
              var $this = $(this),
                      loadurl = $this.attr('data-url');
              $.ajax({
                  url: loadurl,
                  type: 'GET',
                  success: function (res) {
                      $("#tabContent").html(res).return;
                      //$("#tabContent").show();
                      $("#preloader").hide();
                  }
              });
              //$this.tab('show');

              return true;
          });
      });
  </script>
</div>
</body>
</html>
