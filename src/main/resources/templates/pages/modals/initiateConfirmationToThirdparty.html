<div class="panel panel-default panel-fill" >
    <!--<div id="retryTransactions">-->
    <div class="panel-heading" style="background-color: #860903 ! important; "> <h3 class="panel-title" style="color: #ffffff !important;">ARE YOU SURE YOU WANT TO  SEND CONFIRMATION EMAIL ? </h3>
    </div>
    <div class="panel-body" >
        <form role="form" name="sendConfirmationEmailPost" id="sendConfirmation" enctype="multipart/form-data">
            <table  class="table table-striped table-bordered">
                <tr>
                    <td>Reason:  <textarea name="reason" class="form-control" placeholder="Type a reason" required></textarea></td>
                </tr>
            </table>
            <table id="cbsTxnsRetryRefund" class="table table-striped table-bordered"  style="width: 100%; font-size: 11px !important;">
                <thead>
                    <tr>
                        <th>Txn Date</th>
                        <th>Bank Reference</th>
                        <th>MNO Reference</th>
                        <th>Source Acct</th>
                        <th>Destination Acct</th>
                        <th>Amount</th>
                    </tr>
                </thead>
            </table>
            <div class="modal-footer">
                <button type="button" class="btn btn-default " data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary btn-teal"><b>Submit</b></button>
            </div>
        </form>
    </div>
</div>
<div class="row" id="preloader333" hidden=""> 
    <img th:src="@{/assets/images/please_wait.gif}" alt="please wait"/>
</div>
<!--</div>-->
<script>
    $(document).ready(function () {
        $("#successFlag").hide();
        $('#myModal').data('modal', null);
        $(".btn-teal").click(function (e) {
            e.preventDefault();
            $('#preloader333').show();
            var formdata = new FormData($("#sendConfirmation")[0]);
            $.ajax({
                url: '/sendConfirmationEmailPost',
                data: formdata,
                type: 'POST',
                enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (res) {
                   alert('response:'+res);

                    $('#myModal').modal('hide');
                    $("#myModal").on('hidden.bs.modal', function () {
                        $(this).data('bs.modal', null);
                    });
                    $("#successFlag").show();
                    $("#successFlag").html('<div class="alert alert-success" role="alert" id="successFlag"><button type="button" class="close" data-dismiss="alert"asuccessFlagria-label="Close"> </button><strong>SUCCESS!!!!!!</strong></div>');
                },
                error: function (res) {
                    console.log(res);
                    $('#myModal').modal('hide');
                    $("#successFlag").show();
                    $("#successFlag").html('<div class="alert alert-danger" role="alert" id="successFlag"><button type="button" class="close" data-dismiss="alert"asuccessFlagria-label="Close"> </button><strong>Error!</strong></div>');

                }
            });
        });
    });
</script>