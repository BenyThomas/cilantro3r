<div class="panel panel-default panel-fill" >
    <!--<div id="retryTransactions">-->
    <div class="panel-heading" style="background-color: #ff0000 ! important; "> <h3 class="panel-title" style="color: #ffffff !important;">ARE YOU SURE YOU WANT TO <b th:text="${#strings.toUpperCase(identifier)}"> value here </b>  THIS TXNS ?....</h3>
    </div>
    <div class="panel-body" >
        <form role="form" name="initiateRetryRefund" id="iniateRetryRefund" enctype="multipart/form-data">
            <table  class="table table-striped table-bordered">
                <input hidden="" name="txnid" th:value="${txnid}">
                <input hidden="" name="sourceAccount" th:value="${sourceAccount}">
                <input hidden="" name="destinationAccount" th:value="${destinationAccount}">
                <input hidden="" name="identifier" th:value="${identifier}">
                <input hidden="" name="amount" th:value="${amount}">
                <input hidden="" name="ttype" th:value="${ttype}">
                <tbody>
                    <tr>
                        <td>Transaction Ref: <strong style="color:red" th:text="${txnid}"></strong> </td>
                    </tr>
                    <tr>
                        <td>Amount: <strong style="color:red" th:text="${#numbers.formatDecimal(amount, 0, 'COMMA', 2, 'POINT')}"></strong> </td>
                    </tr>
                    <tr>
                        <td>Source A/C: <strong style="color:red" th:text="${sourceAccount}"></strong> </td>
                    </tr>
                    <tr>
                        <td>Destination A/C: <strong style="color:red"  th:text="${destinationAccount}"></strong> </td>
                    </tr>
                    <tr>
                        <td>Receipt No:  <strong style="color:red" th:text="${txnid}"></strong> </td>
                    </tr>
                    <tr>
                        <td>Supporting Document:  <input type="file" name="file" class="form-control" ></td>
                    </tr>
                    <tr>
                        <td>Reason:  <textarea name="reason" class="form-control" placeholder="Type a reason" required></textarea></td>
                    </tr>
                </tbody>
            </table>

            <div class="modal-footer">
                <button type="button" class="btn btn-default " data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary btn-teal"><b th:text="${identifier}">Submit</b></button>
            </div>
        </form>
    </div>
</div>
<div class="row" id="preloader333" hidden=""> 
    <img th:src="@{/assets/images/please_wait.gif}" alt="please wait"/>
</div>
<!--</div>-->
<script>
    $(document).ready(function () {
        $("#successFlag").hide();
        $('#myModal').data('modal', null);
        $(".btn-teal").click(function (e) {
            e.preventDefault();
            $('#preloader333').show();
            //var formdata = new FormData($("#iniateRetryRefund")[0]);
            var formdata = new FormData($('#iniateRetryRefund')[0]);
            $.ajax({
                url: '/initiateRetryRefundPost',
                data: formdata,
                type: 'POST',
                 enctype: 'multipart/form-data',
                processData: false,
                contentType: false,
                success: function (res) {
                                console.log(res);

                    $('#myModal').modal('hide');
                    $("#myModal").on('hidden.bs.modal', function () {
                        $(this).data('bs.modal', null);
                    });
                    $("#successFlag").show();
                    $("#successFlag").html('<div class="alert alert-success" role="alert" id="successFlag"><button type="button" class="close" data-dismiss="alert"asuccessFlagria-label="Close"> </button><strong>SUCCESS!</strong></div>');
                },
                error: function (res) {
                    $('#myModal').modal('hide');
                    $("#successFlag").show();
                    $("#successFlag").html('<div class="alert alert-danger" role="alert" id="successFlag"><button type="button" class="close" data-dismiss="alert"asuccessFlagria-label="Close"> </button><strong>Error!</strong></div>');

                }
            });
        });
    });
</script>