<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/main_layout}">
    <head>
        <title>Remittance</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div layout:fragment="pageStyle" th:remove="tag">
            <link th:href="@{/assets/plugins/datatables/jquery.dataTables.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/buttons.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/responsive.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/scroller.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/dataTables.colVis.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/dataTables.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/fixedColumns.dataTables.min.css}" rel="stylesheet" type="text/css"/>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div layout:fragment="contents" id="reconData">
                    <div class="panel panel-default panel-fill"  >
                        <div class="panel-heading"> <h4 class="panel-title">APPROVE/INITIATE REMITTANCE </h4></div>
                        <div class="panel-body">
                            <!--                            <div id="cashMovementForm">
                                                            <form role="form" id="initiateCashMovement" name="initiateCashMovement" enctype="multipart/form-data">
                                                                <div class="row">
                                                                    <div class="form-group col-md-3">
                                                                        <label for="exampleInputEmail1" style="margin-left: 0px !important;">Movement Type :</label>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <select class="form-control" id="txnType" name="indicator">
                                                                            <option value="">Select Movement Type</option>
                                                                            <option value="viaBOT">Via BOT</option>      
                                                                            <option value="btnMNO">Between MNO Accounts</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="form-group col-md-3">
                                                                        <label for="transactionType" style="margin-left: 0px !important;">Select Destination :</label>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <select class="form-control" id="txnType" name="sourceAcctDestAcct" >
                                                                            <option value="">Select destination MNO</option>
                                                                            <option th:each="acct: ${controlAccts}" th:value="${acct.sourceAcct+'=='+acct.destinationAcct+'=='+acct.code}" th:text="${acct.code}"> ATM  </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="form-group col-md-3">
                                                                        <label for="transactionType" style="margin-left: 0px !important;">Transfer Amount :</label>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <input name="amount" class="form-control form-control-inline col-md-9" placeholder="Amount" required="">
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="form-group col-md-3">
                                                                        <label for="transactionType" style="margin-left: 0px !important;">Transfer Reference :</label>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <input name="reference" class="form-control form-control-inline col-md-9" placeholder="reference" required="">
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="form-group col-md-3">
                                                                        <label for="transactionType" style="margin-left: 0px !important;">Supporting Document :</label>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <input name="fileName" type="file" class="form-control form-control-inline col-md-9" placeholder="Attachment" required="">
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="form-group col-md-3">
                                                                        <label for="transactionType" style="margin-left: 0px !important;">Payment Narration : </label>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <textarea name="comments"  rows="3" cols="46" placeholder="Payment Narration......"></textarea>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="form-group col-md-4" >
                                                                        <button  type="submit" style="margin-top: 8% !important;" class="btn btn-info btn-submit-initiate-cashMovementpayments">Submit</button>
                                                                    </div>
                                                                </div>
                            
                                                            </form>
                                                        </div>
                                                        <div class="row" id="preloader2"> 
                                                            <img th:src="@{/assets/images/please_wait.gif}" alt="please wait"/>
                                                        </div>
                                                        <div id="successFlag"></div>-->
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card-box">
                                        <ul class="nav nav-tabs" >

                                            <li class="nav-item active">
                                                <a style="font-size: 10px !important;" href="#/gepgRemittance"  data-url="/gepgRemittance" data-toggle="tab" data-target="#tabContent" aria-expanded="true" id="tabContentsss"class="nav-link">
                                                    GePG Remittance
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a style="font-size: 10px !important;" href="#/gepgMNORemittanceTxns"  data-url="/gepgMNORemittanceTxns" data-toggle="tab" data-target="#tabContent" aria-expanded="true" id="tabContentsss"class="nav-link">
                                                    Approve GePG Remittance
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a style="font-size: 10px !important;" href="#/getBranchRemittance"  data-url="/getBranchRemittance" data-toggle="tab" data-target="#tabContent" aria-expanded="true" id="tabContentsss"class="nav-link">
                                                    Approve Branch Remittance
                                                </a>
                                            </li>
                                            <li class="nav-item">
                                                <a style="font-size: 10px !important;" href="#/onlineRemittance"  data-url="/onlineRemittance" data-toggle="tab" data-target="#tabContent" aria-expanded="true" id="tabContentsss"class="nav-link">
                                                    Approve Online Remittance
                                                </a>
                                            </li>
                                        </ul>
                                        <div class="row" id="preloader"> 
                                            <img th:src="@{/assets/images/please_wait.gif}" alt="please wait"/>
                                        </div>
                                        <div class="row">
                                            <div id="tabContent">
                                            </div>
                                        </div>
<!--                                        <div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                            <div class="modal-dialog">
                                                <div id="areaValue">
                                                </div>
                                            </div>
                                        </div>-->
                                    </div>
                                </div> <!-- end col -->
                            </div>

                        </div>

                    </div>
                </div>
            </div>

        </div>
        <div layout:fragment="pageScript" th:remove="tag">
            <script th:src="@{/assets/plugins/datatables/jquery.dataTables.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.bootstrap.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.buttons.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/buttons.bootstrap.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/jszip.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/pdfmake.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/vfs_fonts.js}"></script>
            <script th:src="@{/assets/plugins/datatables/buttons.html5.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/buttons.print.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.keyTable.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.responsive.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/responsive.bootstrap.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.scroller.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.colVis.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.fixedColumns.min.js}"></script>           
            <!-- init -->
            <script th:src="@{/assets/pages/jquery.datatables.init.js}"></script>
            <!-- App Js -->
            <script th:src="@{/assets/js/jquery.app.js}"></script>
            <script th:src="@{/assets/plugins/select2v4/select2.min.js}"></script>
            <script th:src="@{/assets/scripts/reconDashboard.js}"></script>
            <script th:src="@{/assets/scripts/transactions.js}"></script>
            <script>
                $(document).ready(function () {
                    $("#preloader2").hide();
                    $("#preloader").hide();
                    $(".btn-submit-initiate-cashMovementpayments").click(function (e) {
                        $("#preloader2").show();
                        e.preventDefault();
                        $('#preloader333').show();
                        var formdata = new FormData($("#initiateCashMovement")[0]);
                        console.log(formdata);
                        $.ajax({
                            url: '/initiateCashMovement',
                            data: formdata,
                            type: 'POST',
                            enctype: 'multipart/form-data',
                            processData: false,
                            contentType: false,
                            success: function (res) {
                                $("#cashMovementForm").hide();
                                $("#preloader2").hide();
                                console.log(res);
                                $('#myModal').modal('hide');
                                $("#myModal").on('hidden.bs.modal', function () {
                                    $(this).data('bs.modal', null);
                                });
                                $("#successFlag").show();
                                $("#successFlag").html('<div class="alert alert-success" role="alert" id="successFlag"><button type="button" class="close" data-dismiss="alert"asuccessFlagria-label="Close"> </button><strong>Transaction successfully initiated please check on INITIATED TRANSACTIONS</strong></div>');
                            },
                            error: function (res) {
                                console.log(res);
                                $('#myModal').modal('hide');
                                $("#successFlag").show();
                                $("#successFlag").html('<div class="alert alert-danger" role="alert" id="successFlag"><button type="button" class="close" data-dismiss="alert"asuccessFlagria-label="Close"> </button><strong>Error!</strong></div>');
                            }
                        });
                    });
                    //load tab content 
                    $('[data-toggle="tab"]').click(function (e) {
                        $("#preloader").show();
                        var $this = $(this),
                                loadurl = $this.attr('data-url');
                        $.ajax({
                            url: loadurl,
                            type: 'GET',
                            success: function (res) {
                                $("#tabContent").html(res).return;
                                //$("#tabContent").show();
                                $("#preloader").hide();
                            }
                        });
                        //$this.tab('show');

                        return true;
                    });
                });
            </script>
        </div>
    </body>
</html>
