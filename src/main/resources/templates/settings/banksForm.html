<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/main_layout}">
    <head>
        <title>Banks</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

    </head>
    <body>
        <div layout:fragment="pageStyle" th:remove="tag">
            <style>
                #loading {
                    background: url('/assets/images/ajax-loader.gif') no-repeat center center;
                    position: absolute;
                    top: 0;
                    left: 0;
                    height: 92%;
                    width: 100%;
                    z-index: 9999999;
                }
                .btn{
                    border-radius: 0px !important;
                }
                .btn-dark {
                    background-color: #107f13!important;
                    border: 1px solid #ffffff!important;
                }
            </style>
            <link th:href="@{/assets/plugins/datatables/jquery.dataTables.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/buttons.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/responsive.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/scroller.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/dataTables.colVis.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/dataTables.bootstrap.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/datatables/fixedColumns.dataTables.min.css}" rel="stylesheet" type="text/css"/>
            <link th:href="@{/assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css}" rel="stylesheet">
            <link th:href="@{/assets/plugins/select2/css/select2.min.css}" rel="stylesheet" type="text/css" />
        </div>
        <div class="container" layout:fragment="contents">
            <div class="table-responsive">
                <div class="panel panel-default panel-fill" id="tabContentsss"><div class="panel-heading"> <h4 class="panel-title">ADD BANK SWIFT CODE</h4></div>
                    <div class="panel-body">
                        <div  id="editPermission"></div>
                        <div class="col-md-12" id="successFlag"></div>
                        <div id="addNewServiceProverForm">
                            <form class="form-horizontal" role="form" id="addNewBankForm">
                                <table  class="table table-striped table-bordered"  style="width: 100%; font-size: 8.5px !important;">
                                    <tbody>
                                        <tr>
                                            <td>Bank Name</td>
                                            <td><input type="text" name="bankName" id="bankName"  autocomplete="off"  class="form-control form-control-sm" style="font-size: 10px !important;" placeholder="BANK NAME"></td>
                                            <td>Swift Code</td>
                                            <td><input type="text" name="swiftCode" id="swiftCode"  autocomplete="off"  class="form-control form-control-sm" style="font-size: 10px !important;" placeholder="SWIFT CODE"></td>
                                            <td>
                                                <select class="form-control" id="identifier" name="identifier">
                                                    <option disabled="" value  selected="">BIC BOUNDARY</option>
                                                    <option value="LOCAL">LOCAL</option>
                                                    <option value="INTERNATIONAL">INTERNATIONAL</option>
                                                </select>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <button type="button" class="btn btn-primary save-addNewBank">Save Bank</button>
                            </form>
                        </div>
                        <div class="row">
                            <table id="serviceProvidersTable" class="display nowrap table table-striped table-bordered"  style="width: 100%; font-size: 8.5px !important;">
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Bank Name</th>
                                        <th>Swift Code</th>
                                        <th>Identifier</th>
                                        <th>Created By</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                            
                                    <tr th:each="item : ${banks}">
                                        <td  th:text="${item.id}">S/N</td>
                                        <td  th:text="${item.name}">Bank Name</td>
                                        <td  th:text="${item.swift_code}">Swift Code</td>
                                        <td  th:text="${item.identifier}">Identifier</td>
                                        <td  th:text="${item.created_by}">Created By</td>
                                        <td  th:text="${item.id}">Action</td>
                                    </tr>
                                </tbody>
                            </table>
                            <!--</form>-->
                        </div>
                    </div>

                </div>


            </div>
        </div> <!-- container -->

        <!--</body>-->
        <div layout:fragment="pageScript" th:remove="tag">
            <script th:src="@{/assets/plugins/datatables/jquery.dataTables.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.bootstrap.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.buttons.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/buttons.bootstrap.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/jszip.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/pdfmake.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/vfs_fonts.js}"></script>
            <script th:src="@{/assets/plugins/datatables/buttons.html5.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/buttons.print.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.keyTable.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.responsive.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/responsive.bootstrap.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.scroller.min.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.colVis.js}"></script>
            <script th:src="@{/assets/plugins/datatables/dataTables.fixedColumns.min.js}"></script>
            <!--init--> 
            <script th:src="@{/assets/pages/jquery.datatables.init.js}"></script>
            <!--App Js--> 
            <script th:src="@{/assets/js/jquery.app.js}"></script>
            <script th:src="@{/assets/plugins/select2v4/select2.min.js}"></script>
            <script th:src="@{/assets/plugins/select2/js/select2.min.js}" type="text/javascript"></script>
            <script th:src="@{/assets/scripts/teller.js}"></script>
            <script type="text/javascript">
                $(document).ready(function () {                

                   
                    /*
                     * SAVE THE BANK ON DATABASE
                     */
                    $('.save-addNewBank').click(function (e) {
                        var formdata = new FormData($('#addNewBankForm')[0]);
                        $.ajax({
                            url: "/addNewBank",
                            type: 'POST',
                            data: formdata, //{senderAccount: senderAccount, senderName: senderName, senderAddress: senderAddress, amount: amount, currency: currency, beneficiaryName: beneficiaryName, beneficiaryBIC: beneficiaryBIC, description: description, supporting_doc: supporting_doc, beneficiaryAccount: beneficiaryAccount},
                            enctype: 'multipart/form-data',
                            processData: false,
                            contentType: false,
                            success: function (res) {
                                $('.error').html('');
                                if (res.validated) {
                                    $('#preloader2').hide();
                                    $("#successFlag").html('<div class="alert alert-success" role="alert" id="successFlag"><button type="button" class="close" data-dismiss="alert"asuccessFlagria-label="Close"> </button><strong>Service provider Added Successfuly</strong></div>');
                                    $('#serviceProvidersTable').DataTable().ajax.reload();
                                    $('#addNewServiceProverForm').hide();
                                } else {
                                    $('#preloader2').hide();
                                    $.each(res.errorMessages, function (key, value) {
                                        $('Select[name=' + key + ']').after('<span class="error" style="color:red">' + value + '</span>');
                                        $('input[name=' + key + ']').after('<span class="error" style="color:red">' + value + '</span>');
                                        $('textarea[name=' + key + ']').after('<span class="error" style="color:red">' + value + '</span>');

                                    });
                                }
                                $("#loading").hide();
                                $("#loading2").hide();
                            },
                            error: function (res) {
                                console.log(res);
                                $("#loading").hide();
                                $("#loading2").hide();
                            },
                            before: function (res) {
                                $("#loading").show();
                                $("#loading2").show();
                            }
                        });
                    });
                   
                });
              

            </script>
        </div>

</html>
