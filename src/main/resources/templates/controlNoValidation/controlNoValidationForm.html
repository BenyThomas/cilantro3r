<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:sec="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.w3.org/1999/xhtml"
      layout:decorate="~{fragments/main_layout}">


<body>
<div layout:fragment="contents" xmlns:layout="http://www.w3.org/1999/xhtml">

    <div id="loading"></div>
    <div class="panel panel-default panel-fill" id="tabContentsss">
        <div class="panel-heading"><h4 class="panel-title">CONTROL NUMBER VALIDATION</h4></div>
        <div class="panel-body">
            <div class="row" id="rtgsPayments">
                <div class="col-md-12" id="successFlag"></div>
                <div class="col-md-12 pull-right" id="MT_TYPES"></div>
                <div class="col-md-12" id="rtgsTransferFormDiv">
                    <div class="row">
                        <div class="col-sm-6">
                            <input type="text" name="controlNo" id="controlNo" autocomplete="off"
                                   class="form-control form-control-sm" style="font-size: 10px !important;"
                                   placeholder="Control Number">
                        </div>
                        <div class="col-sm-6">
                            <button type="button" class="btn btn-primary" onclick="validateGePGControlNo()">Validate
                            </button>
                        </div>
                    </div>
                    <br>
                    <br>
                    <div hidden="" id="errorMessage">
                        <div class="alert alert-danger " role="alert">
                            <strong>No record found!</strong> Please check if the Reference number is correct
                        </div>
                    </div>
                    <br>
                    <div hidden="" id="info">
                        <table class="table table-striped table-bordered"
                               style="width: 100%; font-size: 8.5px !important;">
                            <tbody>
                            <tr>
                                <td>Account Number</td>
                                <td id="acctNo"></td>
                            </tr>
                            <tr>
                                <td>Full Name</td>
                                <td id="fullName"></td>
                            </tr>
                            <tr>
                                <td>phone Number</td>
                                <td id="phoneNumber"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--<div class="form-group col-md-9">-->
    <div class="row"></div>
    <div class="row">
    </div>
    <div layout:fragment="pageScript" th:remove="tag">
        <script th:src="@{/assets/plugins/datatables/jquery.dataTables.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/dataTables.bootstrap.js}"></script>
        <script th:src="@{/assets/plugins/datatables/dataTables.buttons.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/buttons.bootstrap.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/jszip.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/pdfmake.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/vfs_fonts.js}"></script>
        <script th:src="@{/assets/plugins/datatables/buttons.html5.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/buttons.print.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/dataTables.keyTable.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/dataTables.responsive.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/responsive.bootstrap.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/dataTables.scroller.min.js}"></script>
        <script th:src="@{/assets/plugins/datatables/dataTables.colVis.js}"></script>
        <script th:src="@{/assets/plugins/datatables/dataTables.fixedColumns.min.js}"></script>
        <!--init-->
        <script th:src="@{/assets/pages/jquery.datatables.init.js}"></script>
        <!--App Js-->
        <script th:src="@{/assets/js/jquery.app.js}"></script>
        <script th:src="@{/assets/plugins/select2v4/select2.min.js}"></script>
        <script th:src="@{/assets/plugins/select2/js/select2.min.js}" type="text/javascript"></script>
        <script th:src="@{/assets/scripts/teller.js}"></script>
        <script>
            $(document).ready(function () {
            });

            function validateGePGControlNo() {
                var controlNo = $("input[name='controlNo']").val();
                $('#info').hide();
                $('#errorMessage').hide();
                $.ajax({
                    url: "/fireValidateControlNumber",
                    type: 'GET',
                    data: {controlNo: controlNo},
                    dataType: "json",
                    success: function (res) {
                        console.log(res);
                        if(res.status==="failed"){
                            $('#errorMessage').show();
                        }else {
                            $('#info').show();
                            $('#acctNo').text(res.accountNumber)
                            $('#fullName').text(res.fullName)
                            $('#phoneNumber').text(res.phoneNumber)
                        }
                    },
                    error: function (res) {
                        $("#loading").hide();
                        $('#senderAccount').after('<h4 class="error" style="color:red     font-size: 8px !important;"> Error: Please Try Again. Please contact IT Helpdesk / Database Administrator: RUBIKON NOT FOUND</h4>');
                        console.log(res);
                    }
                })
            }
        </script>
    </div>


</div>
</body>
</html>




